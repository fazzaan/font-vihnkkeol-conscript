###
# OpenType Layout feature definitions
# Format: Adobe FDK for OpenType (AFDKO) version 2.5
# Generated on: 2026-1-30 22:6
# Generated by: FontLab 8.0.0
#
# Totals:
# Languagesystems: 0
# GSUB lookups: 0
# GPOS lookups: 0

#
# Languagesystem definitions
#

#> languagesystem
languagesystem DFLT dflt;
languagesystem latn dflt;
#< languagesystem


#
# Lookup definitions
#

# Full alphabet classed to contain base glyphs and keyboard-mapped unicode chars:

# Consonants
@ta = [ taBase ];
@da = [ daBase ];
@Ta = [ TaBase ];
@Da = [ DaBase ];
@ka = [ kaBase ];
@ga = [ gaBase ];
@tHa = [ tHaBase ];
@dHa = [ dHaBase ];
@kHa = [ kHaBase ];
@gHa = [ gHaBase ];
@sa = [ saBase ];
@tha = [ thaBase ];
@sha = [ shaBase ];
@lha = [ lhaBase ];
@kha = [ khaBase ];
@Ha = [ HaBase ];
@hha = [ hhaBase ];
@cha = [ chaBase ];
@cHa = [ cHaBase ];
@na = [ naBase ];
@Na = [ NaBase ];
@nga = [ ngaBase ];
@ra = [ raBase ];
@lra = [ lraBase ];
@ya = [ yaBase ];
@La = [ LaBase ];
@tsa = [ tsaBase ];
@TTa = [ TTaBase ];

@AllConsonants = [ @ta @da @Ta @Da @ka @ga @tHa @dHa @kHa @gHa @sa @tha @sha @lha @kha @Ha @hha @cha @cHa @na @Na @nga @ra @lra @ya @La @tsa @TTa ];

# Vowels
@Ah = [ AhBase ];
@Eh = [ EhBase ];
@Ih = [ IhBase ];
@Uh = [ UhBase ];
@i    = [ iBase ];
@u   = [ uBase ];
@Ae = [ AeBase ];
@Eo = [ EoBase ];
@Ai   = [ AiBase ];

@VowelsLeft = [ @Ah @Eh @Ae @Eo ];
@VowelsRight = [ @Ih @Uh @i @u @Ai ];
@AllVowels = [ @VowelsLeft @VowelsRight ];

@AllLetters = [ @AllConsonants @AllVowels ];

# Numerals / Numbers
# Unicode numbers
@0 = [ zero ];
@1 = [ one ];
@2 = [ two ];
@3 = [ three ];
@4 = [ four ];
@5 = [ five ];
@6 = [ six ];
@7 = [ seven ];
@8 = [ eight ];
@9 = [ nine ];
@dex = [ turneddigittwo ]; # O is defined in the Keyboard Layout section in calt
@elf = [ turneddigitthree ]; # P is defined in the Keyboard Layout section in calt

@AllNumbersUnicode = [ @0 @1 @2 @3 @4 @5 @6 @7 @8 @9 @dex @elf ];

# Base-Bot numbers
@0Bot = [ zeroBaseBot ];
@1Bot = [ oneBaseBot ];
@2Bot = [ twoBaseBot ];
@3Bot = [ threeBaseBot ];
@4Bot = [ fourBaseBot ];
@5Bot = [ fiveBaseBot ];
@6Bot = [ sixBaseBot ];
@7Bot = [ sevenBaseBot ];
@8Bot = [ eightBaseBot ];
@9Bot = [ nineBaseBot ];
@dexBot = [ turneddigittwoBaseBot ];
@elfBot = [ turneddigitthreeBaseBot ];

@AllNumbersBot = [ @0Bot @1Bot @2Bot @3Bot @4Bot @5Bot @6Bot @7Bot @8Bot @9Bot @dexBot @elfBot ];

# Base-Top numbers
@0Top = [ zeroBaseTop ];
@1Top = [ oneBaseTop ];
@2Top = [ twoBaseTop ];
@3Top = [ threeBaseTop ];
@4Top = [ fourBaseTop ];
@5Top = [ fiveBaseTop ];
@6Top = [ sixBaseTop ];
@7Top = [ sevenBaseTop ];
@8Top = [ eightBaseTop ];
@9Top = [ nineBaseTop ];
@dexTop = [ turneddigittwoBaseTop ];
@elfTop = [ turneddigitthreeBaseTop ];

@AllNumbersTop = [ @0Top @1Top @2Top @3Top @4Top @5Top @6Top @7Top @8Top @9Top @dexTop @elfTop ];

@AllNumberGlyphs = [ @AllNumbersUnicode @AllNumbersBot @AllNumbersTop ]; # contain all three items - zero, zerobasebot, zerobasetop



# FEATURES START ______________________________


feature calt {
# Contextual Alternates

#> feature
#< feature

### KEYBOARD LAYOUT
### OK GANG WE JUST GONNA PROGRAMME THE KEYBOARD LAYOUT HERE

# Consonants
sub t by taBase;
sub d by daBase;
sub [ T q ] by TaBase;
sub [ D w ] by DaBase;
sub k by kaBase;
sub g by gaBase;
sub F by tHaBase;
sub v by dHaBase;
sub K by kHaBase;
sub G by gHaBase;
sub s by saBase;
sub f by thaBase;
sub S by shaBase;
sub l by lhaBase;
sub j by khaBase;
sub h by HaBase;
sub H by hhaBase;
sub c by chaBase;
sub x by cHaBase;
sub n by naBase;
sub [ b N ] by NaBase;
sub m by ngaBase;
sub r by raBase;
sub [ p R ] by lraBase;
sub y by yaBase;
sub L by LaBase;
sub z by tsaBase;
sub Z by TTaBase;

# Vowels
sub a by AhBase;
sub A by AiBase;
sub e by EhBase;
sub E by AeBase;
sub i by IhBase;
sub I by iBase;
sub o by EoBase;
sub u by UhBase;
sub U by uBase;

# Numerals / Numbers
#sub zero by zeroBaseBot;
#sub one by oneBaseBot;
#sub two by twoBaseBot;
#sub three by threeBaseBot;
#sub four by fourBaseBot;
#sub five by fiveBaseBot;
#sub six by sixBaseBot;
#sub seven by sevenBaseBot;
#sub eight by eightBaseBot;
#sub nine by nineBaseBot;
sub O by turneddigittwo;                           # for completeness?
#sub turneddigittwo by turneddigittwoBaseBot; # for completeness?
sub P by turneddigitthree;                            # for completeness?
#sub turneddigitthree by turneddigitthreeBaseBot; # for completeness?

# SPACER HACK (remove later when spacer glyphs have been made)
# sub space by Spacer;
# sub Spacer Spacer by space;


### Class consonants by if they have flat tops and bottoms

@flatBotFull = [ @gHa @ra @ya ]; # full-width
# @flatBotSpacerFull = [ gHaBaseSpacer raBaseSpacer yaBaseSpacer ]; # Spacing variant - vertical line beneath
@flatBotLeft = [ @ga @na ];
# @flatBotSpacerLeft = [ gaBaseSpacer naBaseSpacer ];
@flatBotRight = [ @ta @lha @Ha @cha @cHa ];
# @flatBotSpacerRight = [ taBaseSpacer lhaBaseSpacer HaBaseSpacer chaBaseSpacer cHaBaseSpacer ];

@flatTopFull = [ @Da @dHa @sa @tha @lha @kha @Ha @lra @La @cha @cHa ];
@flatTopSpacerFull = [ DaBaseTopSpacer dHaBaseTopSpacer saBaseTopSpacer thaBaseTopSpacer lhaBaseTopSpacer khaBaseTopSpacer HaBaseTopSpacer lraBaseTopSpacer LaBaseTopSpacer chaBaseTopSpacer cHaBaseTopSpacer ];
@flatTopLeft = [ @da @hha ];
@flatTopSpacerLeft = [ daBaseTopSpacer hhaBaseTopSpacer ]; # Spacing variant - vertical line above
@flatTopRight = [ @kHa @na @Na ];
@flatTopSpacerRight = [ kHaBaseTopSpacer naBaseTopSpacer NaBaseTopSpacer ];

# Flats on top AND bottom 
### not currently necessary
# @flatTopBaseRight = [ @Na ];
# @NaBaseTopSpacer = [ NaBaseTopSpacer ];
# @NaBaseSpacer = [ NaBaseSpacer ];
# @flatTopFullBaseRight = [ @lha ];
# @lhaBaseTopSpacer = [ lhaBaseTopSpacer ];
# @lhaBaseSpacer = [ lhaBaseSpacer ];

@flatTopAll          = [ @flatTopFull         @flatTopLeft          @flatTopRight ];
@flatTopSpacerAll = [ @flatTopSpacerFull @flatTopSpacerLeft @flatTopSpacerRight ];
@flatTopSpacerNotFlatBot = [ DaBaseTopSpacer dHaBaseTopSpacer saBaseTopSpacer thaBaseTopSpacer khaBaseTopSpacer lraBaseTopSpacer LaBaseTopSpacer daBaseTopSpacer kHaBaseTopSpacer hhaBaseTopSpacer ];

@flatBotAll = [ @flatBotFull @flatBotLeft @flatBotRight ];
# @flatBotSpacerAll = [ @flatBotSpacerFull @flatBotSpacerLeft @flatBotSpacerRight ];

@NotFlatTop = [ space @AllVowels @ta @Ta @ka @ga @tHa @gHa @sha @nga @ra @ya @tsa @TTa ];
@NotFlatBot = [ space @AllVowels @flatTopSpacerNotFlatBot @da @Ta @Da @ka @tHa @dHa @kHa @sa @tha @sha @kha @hha @nga @lra @La @tsa @TTa  ];

#ignore sub @flatBotAll @flatTopNot;
#sub @flatBotAll by @flatBotSpacerAll;

#ignore sub @NotFlatBot @flatTopAll';
#sub @flatTopAll' by @flatTopSpacerAll;
sub @flatBotAll @flatTopAll' by @flatTopSpacerAll;
#ignore sub @AllLetters @flatTopSpacerAll';
#sub @flatTopSpacerAll' by @flatTopAll;



### TESTING NUMERALS 

sub zero by zeroBaseBot;
sub one by oneBaseBot;
sub two by twoBaseBot;
sub three by threeBaseBot;
sub four by fourBaseBot;
sub five by fiveBaseBot;
sub six by sixBaseBot;
sub seven by sevenBaseBot;
sub eight by eightBaseBot;
sub nine by nineBaseBot;
sub turneddigittwo by turneddigittwoBaseBot;
sub turneddigitthree by turneddigitthreeBaseBot;

# Replace hundreds column with Top numeral form (right-side of vertical)
# Hundreds and Tens columns get shifted in kern using pos code.
sub @AllNumbersBot' @AllNumbersBot @AllNumbersBot by @AllNumbersTop;

# Replace commas in numbers with a dedicated comma for numbers
sub @AllNumberGlyphs comma' @AllNumberGlyphs by commaNumbers;


} calt;
feature kern {
# Kerning

#> feature
#< feature

# Manual GPOS for swapping first and second numerals in three-blocks:

#ignore sub @AllNumberGlyphs @AllNumberGlyphs @AllNumberGlyphs'; #this doesn't work
#ignore sub @AllNumberGlyphs @AllNumberGlyphs @AllNumberGlyphs @AllNumberGlyphs'; #this doesn't work either

#pos @AllNumberGlyphs <450 0 0 0> @AllNumberGlyphs <-450 0 0 0>; 
pos @AllNumbersTop <450 0 0 0> @AllNumbersBot <-450 0 0 0>; # THIS IS BETTER because they only switch places IF they have already been substituted by the appropriate top or bottom numeral glyph form.

} kern;

